
{
  "entities": {
    "Product": {
      "title": "Product",
      "description": "Represents an item available for sale in the store.",
      "type": "object",
      "properties": {
        "name": {
          "type": "string",
          "description": "The name of the product."
        },
        "description": {
          "type": "string",
          "description": "A detailed description of the product."
        },
        "price": {
          "type": "number",
          "description": "The price of the product."
        },
        "category": {
          "type": "string",
          "description": "The category the product belongs to.",
          "enum": ["foodstuff", "soup"]
        },
        "stock": {
          "type": "number",
          "description": "The current stock level of the product."
        },
        "imageId": {
          "type": "string",
          "description": "The ID for the placeholder image of the product."
        },
        "rating": {
          "type": "number",
          "description": "The average customer rating of the product."
        },
        "reviewCount": {
          "type": "number",
          "description": "The total number of reviews for the product."
        }
      },
      "required": ["name", "price", "category", "stock"]
    },
    "UserProfile": {
      "title": "User Profile",
      "description": "Stores public and non-sensitive information about a user.",
      "type": "object",
      "properties": {
        "firstName": {
          "type": "string",
          "description": "The user's first name."
        },
        "lastName": {
          "type": "string",
          "description": "The user's last name."
        },
        "phone": {
          "type": "string",
          "description": "The user's phone number."
        },
        "shippingAddress": {
          "type": "string",
          "description": "The user's primary shipping address."
        },
        "role": {
          "type": "string",
          "description": "The user's role in the application.",
          "enum": ["Customer", "Content Manager", "Owner"],
          "default": "Customer"
        },
        "wishlist": {
          "type": "array",
          "description": "An array of product IDs that the user has added to their wishlist.",
          "items": {
            "type": "string"
          }
        }
      },
      "required": ["firstName", "lastName", "role"]
    },
    "CartItem": {
      "title": "Cart Item",
      "description": "Represents a product that a user has added to their shopping cart.",
      "type": "object",
      "properties": {
        "quantity": {
          "type": "number",
          "description": "The quantity of the product in the cart."
        },
        "addedAt": {
          "type": "string",
          "format": "date-time",
          "description": "The timestamp when the item was added to the cart."
        }
      },
      "required": ["quantity", "addedAt"]
    },
    "Order": {
      "title": "Order",
      "description": "Represents a customer's order.",
      "type": "object",
      "properties": {
        "status": {
          "type": "string",
          "enum": ["Pending", "Shipped", "Delivered", "Cancelled", "Awaiting Confirmation"]
        },
        "total": { "type": "number" },
        "createdAt": { "type": "string", "format": "date-time" },
        "itemCount": { "type": "number" }
      },
      "required": ["status", "total", "createdAt", "itemCount"]
    },
    "OrderItem": {
      "title": "Order Item",
      "description": "Represents a single item within an order.",
      "type": "object",
      "properties": {
        "productId": { "type": "string" },
        "name": { "type": "string" },
        "quantity": { "type": "number" },
        "price": { "type": "number" }
      },
      "required": ["productId", "name", "quantity", "price"]
    },
    "QuoteRequest": {
      "title": "Quote Request",
      "description": "A user's request for a custom order quote.",
      "type": "object",
      "properties": {
        "userId": {
          "type": "string",
          "description": "The UID of the user who submitted the request."
        },
        "status": {
          "type": "string",
          "enum": ["Pending Review", "Quote Ready", "Accepted", "Rejected", "Expired"],
          "description": "The current status of the quote request."
        },
        "createdAt": {
          "type": "string",
          "format": "date-time",
          "description": "Timestamp when the quote was created."
        },
        "name": { "type": "string" },
        "email": { "type": "string", "format": "email" },
        "phone": { "type": "string" },
        "notes": { "type": "string" },
        "shippingMethod": { "type": "string" },
        "shippingAddress": { "type": "string" },
        "lga": { "type": "string" },
        "services": {
          "type": "array",
          "items": { "type": "string" }
        }
      },
      "required": ["userId", "status", "createdAt", "name", "email", "phone"]
    },
    "QuoteItem": {
      "title": "Quote Item",
      "description": "An individual item within a quote request.",
      "type": "object",
      "properties": {
        "name": { "type": "string" },
        "quantity": { "type": "number" },
        "measure": { "type": "string" },
        "customMeasure": { "type": "string" }
      },
      "required": ["name", "quantity", "measure"]
    },
    "Transaction": {
      "title": "Transaction",
      "description": "Represents a single financial transaction, either an income (Sale) or an Expense.",
      "type": "object",
      "properties": {
        "date": {
          "type": "string",
          "format": "date-time",
          "description": "The date of the transaction."
        },
        "description": {
          "type": "string",
          "description": "A description of the transaction."
        },
        "category": {
          "type": "string",
          "enum": ["Sale", "Supplies", "Marketing", "Salaries", "Other"],
          "description": "The category of the transaction."
        },
        "type": {
          "type": "string",
          "enum": ["Sale", "Expense"],
          "description": "The type of transaction."
        },
        "amount": {
          "type": "number",
          "description": "The amount of the transaction."
        }
      },
      "required": ["date", "description", "category", "type", "amount"]
    },
    "Conversation": {
      "title": "Conversation",
      "description": "Represents a chat thread with a customer.",
      "type": "object",
      "properties": {
        "userId": {
          "type": "string",
          "description": "The UID of the customer."
        },
        "userName": {
          "type": "string",
          "description": "The display name of the customer."
        },
        "userAvatar": {
          "type": "string",
          "description": "The avatar URL of the customer."
        },
        "lastMessage": {
          "type": "string",
          "description": "The text of the last message sent in the conversation."
        },
        "lastMessageAt": {
          "type": "string",
          "format": "date-time",
          "description": "Timestamp of the last message."
        },
        "isReadByAdmin": {
          "type": "boolean",
          "description": "Indicates if the admin has read the latest message."
        }
      },
      "required": ["userId", "userName", "lastMessageAt"]
    },
    "Message": {
      "title": "Message",
      "description": "Represents a single message within a conversation.",
      "type": "object",
      "properties": {
        "senderId": {
          "type": "string",
          "description": "The UID of the message sender ('admin' for admin messages)."
        },
        "text": {
          "type": "string",
          "description": "The content of the message."
        },
        "createdAt": {
          "type": "string",
          "format": "date-time",
          "description": "Timestamp when the message was sent."
        }
      },
      "required": ["senderId", "text", "createdAt"]
    }
  },
  "auth": {
    "providers": ["email-password", "google"]
  },
  "firestore": {
    "/products/{productId}": {
      "schema": {
        "$ref": "#/entities/Product"
      },
      "description": "Collection of all products available in the store."
    },
    "/users/{userId}": {
      "schema": {
        "$ref": "#/entities/UserProfile"
      },
      "description": "Collection where each document represents a user's profile, keyed by their Firebase Auth UID."
    },
    "/users/{userId}/cart/{productId}": {
      "schema": {
        "$ref": "#/entities/CartItem"
      },
      "description": "A sub-collection within each user's document storing items in their shopping cart. The document ID is the product ID."
    },
     "/users/{userId}/orders/{orderId}": {
      "schema": {
        "$ref": "#/entities/Order"
      },
      "description": "A sub-collection for a user's orders."
    },
    "/users/{userId}/orders/{orderId}/items/{orderItemId}": {
        "schema": {
            "$ref": "#/entities/OrderItem"
        },
        "description": "The individual items within a specific order."
    },
    "/quotes/{quoteId}": {
      "schema": {
        "$ref": "#/entities/QuoteRequest"
      },
      "description": "Collection for all custom order quote requests."
    },
    "/transactions/{transactionId}": {
      "schema": {
        "$ref": "#/entities/Transaction"
      },
      "description": "Collection for all financial transactions."
    },
    "/conversations/{conversationId}": {
      "schema": {
        "$ref": "#/entities/Conversation"
      },
      "description": "Top-level collection for all customer chat threads. Document ID is the customer's UID."
    },
    "/conversations/{conversationId}/messages/{messageId}": {
      "schema": {
        "$ref": "#/entities/Message"
      },
      "description": "A sub-collection within each conversation storing the individual messages."
    }
  }
}
